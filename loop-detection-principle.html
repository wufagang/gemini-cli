<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾ªç¯æ£€æµ‹ç®—æ³•åŸç†å¯è§†åŒ–</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            background: #0d1117;
            color: #e6edf3;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #58a6ff;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .algorithm-steps {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .step-panel {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
        }

        .step-title {
            color: #f79000;
            font-size: 1.2em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-section {
            grid-column: 1 / -1;
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        #contentInput {
            width: 100%;
            height: 80px;
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 4px;
            color: #e6edf3;
            padding: 10px;
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
        }

        .controls {
            margin: 15px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        button {
            background: #238636;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        button:hover {
            background: #2ea043;
        }

        .demo-btn {
            background: #0969da;
        }

        .demo-btn:hover {
            background: #0860ca;
        }

        .clear-btn {
            background: #da3633;
        }

        .clear-btn:hover {
            background: #b93937;
        }

        /* æ ¸å¿ƒå¯è§†åŒ–åŒºåŸŸ */
        .visualization-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .chunk-processing {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
        }

        .content-chunks {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
        }

        .chunk-item {
            background: #21262d;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 12px;
            position: relative;
            transition: all 0.3s ease;
        }

        .chunk-item.processing {
            border-color: #f79000;
            background: #2d1b10;
            animation: pulse 1s ease-in-out;
        }

        .chunk-item.duplicate {
            border-color: #da3633;
            background: #2d1618;
        }

        .chunk-hash {
            font-size: 10px;
            color: #7d8590;
            font-family: monospace;
            margin-bottom: 8px;
        }

        .chunk-content {
            font-size: 13px;
            color: #e6edf3;
            margin-bottom: 8px;
        }

        .chunk-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            color: #7d8590;
        }

        .repeat-count {
            background: #da3633;
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: bold;
        }

        .repeat-count.normal {
            background: #238636;
        }

        .repeat-count.warning {
            background: #f79000;
        }

        .repeat-count.danger {
            background: #da3633;
            animation: blink 1s infinite;
        }

        /* ç»Ÿè®¡é¢æ¿ */
        .stats-panel {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
        }

        .hash-table {
            margin-top: 15px;
        }

        .hash-entry {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            margin: 4px 0;
            background: #21262d;
            border-radius: 4px;
            font-size: 12px;
        }

        .hash-entry.highlighted {
            background: #2d1b10;
            border: 1px solid #f79000;
        }

        .hash-entry.loop-detected {
            background: #2d1618;
            border: 1px solid #da3633;
            animation: blink 2s infinite;
        }

        .hash-value {
            font-family: monospace;
            color: #79c0ff;
            font-size: 10px;
        }

        .count-badge {
            background: #21262d;
            color: #e6edf3;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            min-width: 30px;
            text-align: center;
        }

        .count-badge.warning {
            background: #f79000;
            color: #000;
        }

        .count-badge.danger {
            background: #da3633;
            color: #fff;
        }

        /* æ»‘åŠ¨çª—å£å¯è§†åŒ– */
        .sliding-window {
            grid-column: 1 / -1;
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
        }

        .window-display {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 4px;
            padding: 15px;
            margin-top: 15px;
            position: relative;
            min-height: 100px;
        }

        .window-content {
            font-family: monospace;
            font-size: 12px;
            color: #e6edf3;
            white-space: pre-wrap;
            line-height: 1.4;
        }

        .window-indicator {
            position: absolute;
            top: -10px;
            right: 10px;
            background: #238636;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
        }

        .truncation-indicator {
            color: #f79000;
            font-style: italic;
            margin-top: 10px;
            font-size: 11px;
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.5; }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-in {
            animation: slideIn 0.5s ease-out;
        }

        /* ç®—æ³•çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .algorithm-status {
            background: #21262d;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: #0d1117;
            border-radius: 4px;
        }

        .status-label {
            color: #7d8590;
            font-size: 12px;
        }

        .status-value {
            font-weight: bold;
            color: #e6edf3;
        }

        .status-value.normal { color: #3fb950; }
        .status-value.warning { color: #f79000; }
        .status-value.danger { color: #da3633; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¬ å¾ªç¯æ£€æµ‹ç®—æ³•åŸç†è§£æ</h1>
            <p>æ·±åº¦å¯è§†åŒ–å†…å®¹é‡å¤æ£€æµ‹çš„æ ¸å¿ƒæœºåˆ¶</p>
        </div>

        <div class="algorithm-status">
            <div class="status-grid">
                <div class="status-item">
                    <span class="status-label">çª—å£å¤§å°:</span>
                    <span id="windowSize" class="status-value normal">0 / 1000</span>
                </div>
                <div class="status-item">
                    <span class="status-label">å†…å®¹å—æ•°:</span>
                    <span id="chunkCount" class="status-value normal">0</span>
                </div>
                <div class="status-item">
                    <span class="status-label">å“ˆå¸Œè¡¨æ¡ç›®:</span>
                    <span id="hashEntries" class="status-value normal">0</span>
                </div>
                <div class="status-item">
                    <span class="status-label">æœ€é«˜é‡å¤æ¬¡æ•°:</span>
                    <span id="maxRepeats" class="status-value normal">0</span>
                </div>
                <div class="status-item">
                    <span class="status-label">å¾ªç¯çŠ¶æ€:</span>
                    <span id="loopStatus" class="status-value normal">æ­£å¸¸</span>
                </div>
                <div class="status-item">
                    <span class="status-label">é˜ˆå€¼:</span>
                    <span id="threshold" class="status-value normal">3</span>
                </div>
            </div>
        </div>

        <div class="input-section">
            <div class="step-title">
                ğŸ“ è¾“å…¥å†…å®¹è¿›è¡Œåˆ†æ
            </div>
            <textarea id="contentInput" placeholder="è¾“å…¥å†…å®¹æŸ¥çœ‹å¾ªç¯æ£€æµ‹åŸç†...

è¯•è¯•è¿™äº›ä¾‹å­ï¼š
- é‡å¤çš„å¥å­é‡å¤çš„å¥å­é‡å¤çš„å¥å­
- Hello world Hello world Hello world
- ä¸åŒçš„å†…å®¹ä¸ä¼šè§¦å‘å¾ªç¯æ£€æµ‹"></textarea>

            <div class="controls">
                <button onclick="analyzeContent()">ğŸ” åˆ†æå†…å®¹</button>
                <button class="demo-btn" onclick="runDemo('simple')">ğŸ“š ç®€å•é‡å¤æ¼”ç¤º</button>
                <button class="demo-btn" onclick="runDemo('gradual')">ğŸ“ˆ æ¸è¿›é‡å¤æ¼”ç¤º</button>
                <button class="demo-btn" onclick="runDemo('mixed')">ğŸ­ æ··åˆå†…å®¹æ¼”ç¤º</button>
                <button class="demo-btn" onclick="runDemo('threshold')">âš–ï¸ é˜ˆå€¼æµ‹è¯•æ¼”ç¤º</button>
                <button class="clear-btn" onclick="clearAll()">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰</button>
            </div>
        </div>

        <div class="visualization-area">
            <div class="chunk-processing">
                <div class="step-title">
                    ğŸ§© æ­¥éª¤1: å†…å®¹åˆ†å—ä¸å“ˆå¸Œ
                </div>
                <p style="font-size: 12px; color: #7d8590; margin-bottom: 15px;">
                    å†…å®¹è¢«åˆ†å‰²æˆå—ï¼Œæ¯å—è®¡ç®—å“ˆå¸Œå€¼ç”¨äºå¿«é€Ÿæ¯”è¾ƒ
                </p>
                <div id="contentChunks" class="content-chunks">
                    <div style="text-align: center; color: #7d8590; padding: 20px;">
                        ç­‰å¾…è¾“å…¥å†…å®¹...
                    </div>
                </div>
            </div>

            <div class="stats-panel">
                <div class="step-title">
                    ğŸ“Š æ­¥éª¤2: é‡å¤ç»Ÿè®¡ä¸æ£€æµ‹
                </div>
                <p style="font-size: 12px; color: #7d8590; margin-bottom: 15px;">
                    ç»Ÿè®¡æ¯ä¸ªå“ˆå¸Œå€¼çš„å‡ºç°æ¬¡æ•°ï¼Œè¶…è¿‡é˜ˆå€¼åˆ™è§¦å‘å¾ªç¯è­¦å‘Š
                </p>
                <div id="hashTable" class="hash-table">
                    <div style="text-align: center; color: #7d8590; padding: 20px;">
                        æš‚æ— ç»Ÿè®¡æ•°æ®...
                    </div>
                </div>
            </div>
        </div>

        <div class="sliding-window">
            <div class="step-title">
                ğŸªŸ æ­¥éª¤3: æ»‘åŠ¨çª—å£æœºåˆ¶
            </div>
            <p style="font-size: 12px; color: #7d8590; margin-bottom: 15px;">
                ç»´æŠ¤å›ºå®šå¤§å°çš„å†å²çª—å£ï¼Œè¶…å‡ºé™åˆ¶æ—¶ä»å¤´éƒ¨æˆªæ–­å¹¶æ›´æ–°æ‰€æœ‰ç´¢å¼•
            </p>
            <div class="window-display">
                <div class="window-indicator">
                    çª—å£: <span id="windowLength">0</span> å­—ç¬¦
                </div>
                <div id="windowContent" class="window-content">
                    çª—å£ä¸ºç©ºï¼Œç­‰å¾…å†…å®¹è¾“å…¥...
                </div>
                <div id="truncationInfo" class="truncation-indicator" style="display: none;">
                    âš ï¸ çª—å£å·²æ»¡ï¼Œæ­£åœ¨æˆªæ–­æ—§å†…å®¹...
                </div>
            </div>
        </div>
    </div>

    <script>
        // ç®—æ³•çŠ¶æ€
        let contentHistory = '';
        let contentChunks = [];
        let hashStats = new Map();
        let chunkIndex = 0;
        const MAX_WINDOW_SIZE = 1000;
        const LOOP_THRESHOLD = 3;

        // ç®€å•å“ˆå¸Œå‡½æ•°
        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // è½¬æ¢ä¸º32ä½æ•´æ•°
            }
            return Math.abs(hash).toString(16).substring(0, 8);
        }

        // å°†å†…å®¹åˆ†å—
        function chunkContent(content) {
            // æŒ‰å¥å­åˆ†å—ï¼Œæˆ–è€…æŒ‰å›ºå®šé•¿åº¦åˆ†å—
            const sentences = content.split(/[.!?ã€‚ï¼ï¼Ÿ]\s*/).filter(s => s.trim().length > 0);
            if (sentences.length > 1) {
                return sentences.map(s => s.trim()).filter(s => s.length > 0);
            }

            // å¦‚æœæ²¡æœ‰æ˜æ˜¾çš„å¥å­åˆ†éš”ç¬¦ï¼ŒæŒ‰è¯ç»„åˆ†å—
            const words = content.trim().split(/\s+/);
            const chunks = [];
            for (let i = 0; i < words.length; i += 3) {
                const chunk = words.slice(i, i + 3).join(' ');
                if (chunk.trim()) chunks.push(chunk);
            }
            return chunks.length > 0 ? chunks : [content.trim()];
        }

        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus() {
            document.getElementById('windowSize').textContent = `${contentHistory.length} / ${MAX_WINDOW_SIZE}`;
            document.getElementById('chunkCount').textContent = contentChunks.length;
            document.getElementById('hashEntries').textContent = hashStats.size;

            const maxRepeats = hashStats.size > 0 ? Math.max(...hashStats.values()) : 0;
            document.getElementById('maxRepeats').textContent = maxRepeats;

            const maxRepeatsEl = document.getElementById('maxRepeats');
            if (maxRepeats >= LOOP_THRESHOLD) {
                maxRepeatsEl.className = 'status-value danger';
            } else if (maxRepeats >= 2) {
                maxRepeatsEl.className = 'status-value warning';
            } else {
                maxRepeatsEl.className = 'status-value normal';
            }

            const loopDetected = maxRepeats >= LOOP_THRESHOLD;
            const loopStatusEl = document.getElementById('loopStatus');
            loopStatusEl.textContent = loopDetected ? 'æ£€æµ‹åˆ°å¾ªç¯!' : 'æ­£å¸¸';
            loopStatusEl.className = loopDetected ? 'status-value danger' : 'status-value normal';

            document.getElementById('threshold').textContent = LOOP_THRESHOLD;
        }

        // æ·»åŠ å†…å®¹å—åˆ°å¯è§†åŒ–
        function addChunkVisualization(chunk, hash, isNew = true) {
            const chunksContainer = document.getElementById('contentChunks');

            if (isNew && chunksContainer.children.length === 1 &&
                chunksContainer.children[0].textContent.includes('ç­‰å¾…è¾“å…¥')) {
                chunksContainer.innerHTML = '';
            }

            const chunkEl = document.createElement('div');
            chunkEl.className = 'chunk-item slide-in';
            if (isNew) chunkEl.classList.add('processing');

            const count = hashStats.get(hash) || 0;
            const isDuplicate = count > 1;

            if (isDuplicate) {
                chunkEl.classList.add('duplicate');
            }

            chunkEl.innerHTML = `
                <div class="chunk-hash">Hash: ${hash}</div>
                <div class="chunk-content">${chunk}</div>
                <div class="chunk-meta">
                    <span>å— #${chunkIndex++}</span>
                    <span class="repeat-count ${count === 1 ? 'normal' : count < LOOP_THRESHOLD ? 'warning' : 'danger'}">
                        é‡å¤ ${count} æ¬¡
                    </span>
                </div>
            `;

            chunksContainer.appendChild(chunkEl);

            // ç§»é™¤å¤„ç†ä¸­çš„çŠ¶æ€
            if (isNew) {
                setTimeout(() => {
                    chunkEl.classList.remove('processing');
                }, 1000);
            }

            // æ»šåŠ¨åˆ°æœ€æ–°é¡¹
            chunkEl.scrollIntoView({ behavior: 'smooth' });
        }

        // æ›´æ–°å“ˆå¸Œç»Ÿè®¡è¡¨
        function updateHashTable() {
            const tableContainer = document.getElementById('hashTable');

            if (hashStats.size === 0) {
                tableContainer.innerHTML = `
                    <div style="text-align: center; color: #7d8590; padding: 20px;">
                        æš‚æ— ç»Ÿè®¡æ•°æ®...
                    </div>
                `;
                return;
            }

            const sortedEntries = Array.from(hashStats.entries())
                .sort((a, b) => b[1] - a[1]); // æŒ‰å‡ºç°æ¬¡æ•°æ’åº

            tableContainer.innerHTML = sortedEntries.map(([hash, count]) => {
                const isLoopDetected = count >= LOOP_THRESHOLD;
                const isWarning = count >= 2;
                const className = isLoopDetected ? 'loop-detected' :
                                isWarning ? 'highlighted' : '';

                return `
                    <div class="hash-entry ${className}">
                        <span class="hash-value">${hash}</span>
                        <span class="count-badge ${isLoopDetected ? 'danger' : isWarning ? 'warning' : ''}">
                            ${count}
                        </span>
                    </div>
                `;
            }).join('');
        }

        // æ›´æ–°æ»‘åŠ¨çª—å£æ˜¾ç¤º
        function updateWindowDisplay() {
            const windowEl = document.getElementById('windowContent');
            const lengthEl = document.getElementById('windowLength');
            const truncationEl = document.getElementById('truncationInfo');

            lengthEl.textContent = contentHistory.length;

            if (contentHistory.length === 0) {
                windowEl.textContent = 'çª—å£ä¸ºç©ºï¼Œç­‰å¾…å†…å®¹è¾“å…¥...';
                truncationEl.style.display = 'none';
            } else {
                // æ˜¾ç¤ºæœ€è¿‘çš„å†…å®¹ï¼Œå¦‚æœå¤ªé•¿åˆ™æˆªæ–­æ˜¾ç¤º
                const displayContent = contentHistory.length > 500
                    ? '...' + contentHistory.substring(contentHistory.length - 500)
                    : contentHistory;

                windowEl.textContent = displayContent;

                if (contentHistory.length >= MAX_WINDOW_SIZE) {
                    truncationEl.style.display = 'block';
                } else {
                    truncationEl.style.display = 'none';
                }
            }
        }

        // æ¨¡æ‹Ÿæ»‘åŠ¨çª—å£æˆªæ–­
        function truncateWindow() {
            if (contentHistory.length <= MAX_WINDOW_SIZE) {
                return;
            }

            const truncationAmount = contentHistory.length - MAX_WINDOW_SIZE;
            contentHistory = contentHistory.substring(truncationAmount);

            // è¿™é‡Œå¯ä»¥æ·»åŠ æ›´å¤æ‚çš„ç´¢å¼•æ›´æ–°é€»è¾‘
            console.log(`çª—å£æˆªæ–­: åˆ é™¤äº† ${truncationAmount} ä¸ªå­—ç¬¦`);
        }

        // åˆ†æå†…å®¹
        function analyzeContent() {
            const input = document.getElementById('contentInput');
            const content = input.value.trim();

            if (!content) {
                alert('è¯·è¾“å…¥å†…å®¹ï¼');
                return;
            }

            // æ·»åŠ åˆ°å†å²è®°å½•
            contentHistory += content + ' ';

            // æˆªæ–­çª—å£å¦‚æœéœ€è¦
            truncateWindow();

            // åˆ†å—å¤„ç†
            const chunks = chunkContent(content);

            for (const chunk of chunks) {
                const hash = simpleHash(chunk);

                // æ›´æ–°ç»Ÿè®¡
                hashStats.set(hash, (hashStats.get(hash) || 0) + 1);

                // æ·»åŠ åˆ°å¯è§†åŒ–
                addChunkVisualization(chunk, hash, true);
                contentChunks.push({ chunk, hash });
            }

            // æ›´æ–°æ‰€æœ‰æ˜¾ç¤º
            updateHashTable();
            updateWindowDisplay();
            updateStatus();

            // æ¸…ç©ºè¾“å…¥
            input.value = '';
        }

        // æ¼”ç¤ºå‡½æ•°
        async function runDemo(type) {
            clearAll();

            const demos = {
                simple: [
                    "è¿™æ˜¯ç¬¬ä¸€æ¡æ¶ˆæ¯ã€‚",
                    "è¿™æ˜¯ç¬¬ä¸€æ¡æ¶ˆæ¯ã€‚",
                    "è¿™æ˜¯ç¬¬ä¸€æ¡æ¶ˆæ¯ã€‚",
                    "å¾ªç¯æ£€æµ‹åº”è¯¥ä¼šè§¦å‘ï¼"
                ],
                gradual: [
                    "å¼€å§‹è¾“å…¥å†…å®¹ã€‚",
                    "æ·»åŠ ä¸€äº›ä¸åŒçš„æ–‡æœ¬ã€‚",
                    "å¼€å§‹è¾“å…¥å†…å®¹ã€‚",
                    "å†æ¬¡æ·»åŠ ç›¸åŒå†…å®¹ã€‚",
                    "å¼€å§‹è¾“å…¥å†…å®¹ã€‚",
                    "ç°åœ¨åº”è¯¥æ£€æµ‹åˆ°å¾ªç¯äº†ï¼"
                ],
                mixed: [
                    "æ­£å¸¸å†…å®¹A",
                    "æ­£å¸¸å†…å®¹B",
                    "é‡å¤å†…å®¹X",
                    "æ­£å¸¸å†…å®¹C",
                    "é‡å¤å†…å®¹X",
                    "æ­£å¸¸å†…å®¹D",
                    "é‡å¤å†…å®¹X",
                    "å¾ªç¯æ£€æµ‹è§¦å‘ï¼"
                ],
                threshold: [
                    "æµ‹è¯•é˜ˆå€¼",
                    "æµ‹è¯•é˜ˆå€¼",
                    "è¿˜æ²¡åˆ°é˜ˆå€¼",
                    "æµ‹è¯•é˜ˆå€¼",
                    "ç°åœ¨åº”è¯¥è§¦å‘äº†ï¼"
                ]
            };

            const demoSteps = demos[type];

            for (let i = 0; i < demoSteps.length; i++) {
                document.getElementById('contentInput').value = demoSteps[i];
                await new Promise(resolve => setTimeout(resolve, 1500));
                analyzeContent();
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
        }

        // æ¸…ç©ºæ‰€æœ‰
        function clearAll() {
            contentHistory = '';
            contentChunks = [];
            hashStats = new Map();
            chunkIndex = 0;

            document.getElementById('contentInput').value = '';
            document.getElementById('contentChunks').innerHTML = `
                <div style="text-align: center; color: #7d8590; padding: 20px;">
                    ç­‰å¾…è¾“å…¥å†…å®¹...
                </div>
            `;
            document.getElementById('hashTable').innerHTML = `
                <div style="text-align: center; color: #7d8590; padding: 20px;">
                    æš‚æ— ç»Ÿè®¡æ•°æ®...
                </div>
            `;

            updateWindowDisplay();
            updateStatus();
        }

        // åˆå§‹åŒ–
        updateStatus();
        updateWindowDisplay();
    </script>
</body>
</html>